london (cnn) the uk and the european union reached a significant milestone in their pursuit of a brexit deal on friday, breaking a deadlock that allows talks to move on to a crucial second phase.

after a dramatic night of shuttle diplomacy that capped months of tortuous negotiations, european commission president jean-claude juncker and british prime minister theresa may announced the breakthrough at an early morning press conference in brussels.

crucially, the two sides reached a deal on the historically sensitive issue of the irish border, which had threatened to derail the talks as they reached a critical moment earlier this week. discussions can now move on to the potentially tougher issue of a future trading relationship between the uk and the eu.

the breakthrough represents a significant coup for may, whose beleaguered premiership had appeared under threat as talks faltered. it was also a relief for eu negotiators, who feared a complete breakdown in talks if a deal was not done.

"getting to this point required give and take on both sides," may said. "and i believe the joint report that is being published is in the best interest of the whole of the uk."

what has been agreed?

agreement has now been reached on three key issues: britain's brexit "divorce" bill, the rights of eu citizens in the uk after brexit, and the irish border. when brexit negotiations began just under six months ago, the eu was clear on its position: it would not countenance any discussion about a future trading relationship with britain until "sufficient progress" had been made on those three issues.

irish border: the irish question proved the toughest to resolve. the demilitarization of the border between northern ireland and the republic of ireland was a key element of the good friday agreement, the 1998 deal that ended years of sectarian conflict in northern ireland. now, the border posts are gone and people can move freely around the island of ireland.

but brexit raised the prospect of a return to a "hard" border, as northern ireland would leave the eu while the republic of ireland remained in the bloc.

traffic crosses the border into northern ireland from the irish republic near dundalk.

complicating the issue, may's minority government depends on the support of on a small group of 10 mps from northern ireland, members of the hardline democratic unionist party (dup). they were adamantly opposed to any suggestion that, to avoid a hard border, northern ireland could retain laws and regulations that were more aligned to the eu than the rest of the uk.

the dup vetoed the text of an earlier deal on monday, just as may was having lunch with juncker in brussels to finalize it. she was forced to return to london as negotiators spent the rest of the week hammering out a solution acceptable to the dup, the irish government and the eu.

the language of the deal announced on friday remains ambiguous. it says: "in the absence of agreed solutions, the uk will maintain full alignment with those rules of the internal market and the customs union which, now or in the future, support north-south cooperation, the all-island economy and the protection of the 1998 agreement."

that's a backstop. it means that, in the next stage of talks, the uk must come up with solutions that avoid a hard border, otherwise the uk will have to remain tied to eu rules even after brexit. that scenario would enrage the ardent brexiteers in may's conservative party.

divorce bill: friday's agreement says the uk would be required to continue making contributions to the eu budget up to the end of 2020 "as if it had remained in the union". the report adds that the uk will remain liable for its outstanding financial commitments and liabilities up to december 3, 2020.

a spokesman for the uk government put the estimated net cost of the divorce bill at between 35 billion and 39 billion ($47 billion and $52 billion) adding that this estimation "represents a fair settlement of our obligations."

rights of eu citizens after brexit: eu citizens living in the uk and vice versa will have their rights to live, work and study protected. british courts will enforce the rights but, in a concession to europe, the uk has agreed that difficult cases can be referred to the european court of justice for eight years after brexit.

late-night drama

discussions stretched into the early hours of monday morning. when it was clear that a deal was done, may and her chief brexit negotiator david davis dashed to brussels for a breakfast meeting with juncker and other officials.

president @junckereu welcomes prime minister @theresa_may. working breakfast underway. pic.twitter.com/9myxcs1fij  margaritis schinas (@margschinas) december 8, 2017

speaking alongside juncker in the belgian capital, may said the agreement was "fair to the british taxpayer" and resolved the outstanding issues of the irish border. in northern ireland we will guarantee there will be no hard border, and we will uphold the (good friday agreement)."

"no barrier north-south or east-west," she said.

juncker said: "sufficient progress has now been made on the three terms of the divorce." negotiations for the uk to leave the eu can now proceed to the next stage, he added.

if agreement had not been reached on friday it would have been impossible to prepare for its ratification at a summit of eu leaders on december 14 and 15, he said. "we had to make the deal today."

reaction

the leader of the dup, arlene foster, claimed she had secured "substantial changes" to the text she rejected on monday, adding she was "pleased" to see changes which mean there is "no red line down the irish sea".

in a statement, the dup said it had won clear that commitments from the conservatives that "northern ireland will leave the single market and the customs union along with the rest of the united kingdom."

just watched brexit showdown bringing uncertainty to uk replay more videos ... must watch brexit showdown bringing uncertainty to uk 01:48

ireland's prime minister leo varadkar said that the uk had guaranteed there would be no hard border and that the 1998 good friday agreement had been fully protected. "it's a very significant day for the island of ireland," he said.

varadkar added that the common travel area, the arrangement that allows citizens to travel freely between britain and ireland, would remain in place and that irish and british citizens would continue to enjoy the same rights after brexit as they do now.

in london, the reaction from may's colleagues was mostly positive. uk environment secretary michael gove, one of the leading figures in the leave camp during the brexit referendum, said: "i think it's important to recognize this is a significant personal political achievement for the prime minister."

"she got a deal in the interests of the whole of the uk, so the integrity of the uk is absolute and paramount," he told bbc radio 4's today program.

but former ukip leader nigel farage, who has long championed brexit, criticized may over the deal, claiming the country could now "move on to the next stage of humiliation."

donald tusk, president of the european council, warned that the next stage of negotiations would be even tougher. ''breaking up is hard, but breaking up and building new relations is much harder," he said.