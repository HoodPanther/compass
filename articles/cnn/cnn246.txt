new york (cnn) turkish president recep tayyip erdogan personally intervened in a scheme that allowed iran to dodge us and un sanctions, a gold trader with ties to the turkish government claimed in explosive court testimony in new york on thursday.

it's the first time erdogan has been named in the closely-watched us criminal case over iran's violations of international sanctions and movement of billions of dollars.

the case's central figure, reza zarrab, an iranian-turkish gold trader, was arrested in miami last year and has since been the case's top named defendant. there are eight other defendants facing similar charges.

he quietly cut a plea deal last month and admitted to defrauding the united states, money laundering, and bank fraud, according to court documents.

on thursday, zarrab testified in federal court about erdogan's alleged role in zarrab's scheme, which involved laundering funds from iranian oil and gas sales through turkish banks, including the state-run bank, halkbank.

zarrab testified that when the amount of money illegally flowing through turkey's halkbank became too much to handle, erdogan approved getting two more turkish banks involved: vakfbank and ziraat bank.

zarrab said he received this information from the government official he claims to have bribed to take part in the scheme, former turkish economy minister zafer caglayan. caglayan denied all allegations in a turkish probe into these allegations that started in 2013.

on thursday, erdogan responded to zarrab's testimony from wednesday, saying turkey "did the right thing" and did not violate us sanctions against iran, according to cnn turk.

"the prime minister of that time, recep tayyip erdogan, and [then] minister of treasury ali babacan had given orders for them to start the trades, the banks," zarrab said thursday. cnn has sought comment from the turkish government on zarrab's testimony and is awaiting response.

in their court filings, the us government has not alleged that erdogan cooperated in the scheme.

recep tayyip erdogan, president of turkey.

on wednesday, zarrab testified that he paid caglayan more than 31 million euros ($36.7 million) in bribes to help iran launder money and dodge international sanctions. caglayan denied all allegations in a turkish probe into the claims, which started in 2013.

that probe was shut down after turkish police and prosecutors in charge of it were accused of being supporters of fethullah gulen. gulen is the muslim cleric in self-imposed exile in the us whom erdogan has accused of being behind a failed military coup to overthrow him in 2016. gulen denied any involvement.

one of the police officers in the 2013 turkish probe has since fled turkey and will now serve as a witness in the us government's case, prosecutors said in court earlier this week.

for years, us and united nations sanctions on iran have kept that country from accessing billions of dollars stored in banks around the world. the tactic is meant to punish iran for its attempts to develop nuclear weapons and threatening israel and the united states.

zarrab's detailed testimony, which surprised those in the courtroom, brings the criminal case's focus to top levels of the turkish government  and may help explain why erdogan has lambasted the american investigation. the turkish government has sought the return of zarrab. erdogan loyalists view the zarrab case being tried in new york as a political move against the president and his party.

cash to cag

on wednesday, zarrab testified about his role in helping iran dodge sanctions to access money stuck in turkish banks.

zarrab recalled how he paired up with a jeweler in 2012 to devise a scheme in which they would trade gold for cash in order to launder billions of dollars for iran. he told the court how money would traverse through nearly a dozen banks and shell companies and sometimes wind up in american banks  including standard chartered and others. they did this so that iran could conduct international business through proxies and circumvent international sanctions.

"a few billion ... euros" were withdrawn in this scheme "under disguise of gold trade," zarrab said.

in this courtroom sketch, turkish-iranian gold trader reza zarrab, center, testifies before judge richard berman, right.

when a top official at turkey's halkbank refused to let zarrab do that, zarrab said he went to caglayan -- then the economy minister -- to pressure halkbank to play along.

caglayan agreed to meet in person, and asked zarrab details about the illegal deal and its profit margins, zarrab testified.

"i can work with this, sharing profits 50/50," caglayan said, according to zarrab's testimony.

us federal prosecutors showed american jurors what they said were spreadsheets kept by zarrab during the operation of his illegal trading business. in it were several payments marked "cash to cag," a reference to caglayan.

nate schenkkan, a turkey analyst at the pro-democracy organization freedom house who is watching the trial, told cnn this is the first time the public sees "the raw scale of the bribes and corruption."

zarrab's witness testimony and documents displayed at trial "would show that this conspiracy to launder money for iran was not a rogue operation. it would show the turkish government at its very highest level understood what was going on  and approved of it," schenkkan tsaid.

zarrab is also testifying in this trial against the deputy general manager of halkbank, mehmet hakan atilla, who until recently was zarrab's co-defendant. atilla has pleaded not guilty.

zarrab testified that he conducted these types of business deals for the national iran oil company, and the scheme would move money between bank accounts at halkbank that belonged to a major iranian bank, along with the turkish companies botas, tupras and others, before moving the money out internationally.

in essence, zarrab painted a picture that portrayed halkbank as a laundering tool within its own walls.

in a written statement, halkbank denied the accusations: "our bank did not do any illegal transfers about any country. there is no systematic or conscious violation in order to bypass the embargo."

zarrab also testified that he engaged in a scheme to pull iranian money out of aktif bank, the largest privately-owned investment bank in turkey.

on a daily basis, zarrab said he brokered the illegal movement of us $5-10 million of iranian money out of aktif bank. but zarrab claimed he lost the illegal business when the bank cut him out as the middleman and started doing it on its own.

the us connection

in testimony on wednesday, zarrab told the court he initially hired american lawyers to pursue some sort of "prisoner exchange" between the united states and turkey -- an odd effort that failed.

it is unclear who would have been part of that prisoner swap. but the turkish government has several americans  jailed under suspicious circumstances  whom it sees as bartering tools with the united states, according to schenkkan, the analyst.

zarrab did not mention the lawyers by name in court, but after his march 2016 arrest he hired former us attorney general michael mukasey and former new york mayor rudy giuliani, a supporter of and former campaign advisor to us president donald trump.

giuliani and mukasey traveled to turkey in february to meet erdogan to seek a solution to the case, according to one of zarrab's other lawyers.

in a filing in federal court made public in april, giuliani said us and turkish officials were "receptive" to resolving the case, reuters reported.

"that receptiveness is hardly surprising when one considers that none of the transactions in which mr. zarrab is alleged to have participated involved weapons or nuclear technology, or any other contraband, but rather involved consumer goods, and that turkey is situated in a part of the world strategically critical to the united states," giuliani said, according to the filing.